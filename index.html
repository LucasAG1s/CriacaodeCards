<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Criação de Cards - OZONTECK</title>
    <link rel="stylesheet" href="./src/style/style.css">
    <script src="./src/js/integracao.js" defer></script>
</head>

<body>
    <div class="container">
        <div class="logo">
            <img src="./src/imagens/logo inicial.png" alt="Logo">
        </div>
        <h1 class="titulo">
            FORMULÁRIO DE CRIAÇÃO DE CARDS
        </h1>
        <div class="descricao">
            <p>Formulário para preenchimento de demandas para a equipe de TI</p>
            <p>Tickets: BUGS e CORREÇÕES</p>
        </div>
        <div id="myForm">
            <form action="#" method="POST">
                <div class="form-group">
                    <label for="inputSolicitante">Preencha o seu nome e equipe: </label>
                    <input type="text" id="inputSolicitante" name="solicitante">
                </div>
                <div class="NivelTexto">
                    <p>Nível cliente:</p>
                    <div class="Niveis">
                        <div class="executivo">
                            <input type="checkbox" id="checkExecutivo" name="checkboxExecutivo">
                            <label for="checkExecutivo">Executivo</label>
                        </div>
                        <!-- Coloque aqui os outros níveis -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputDescricao">Descrição do erro:</label>
                    <input type="text" id="inputDescricao" name="descricao">
                </div>
                <div class="form-group">
                    <label for="inputCaminho">Caminho para reproduzir o erro:</label>
                    <input type="text" id="inputCaminho" name="caminho">
                </div>
                <div class="form-group">
                    <label for="arquivoInput">Anexe os arquivos:</label>
                    <input type="file" id="arquivoInput" name="arquivoInput[]" multiple>
                </div>
                <div class="botaoenviar">
                    <button type="submit" id="btnEnviar" class="btn-enviar">Enviar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('myForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const taskName = document.getElementById('inputDescricao').value; // Alterei para capturar a descrição do erro

            fetch('https://api.clickup.com/api/v2/task', {
                method: 'POST',
                headers: {
                    'Authorization': 'Y7FJHGAKHI3P0WJHYJJ07KHT8QFCUEQM5OUCET8MDHS4QITUEAF9EXG07VXC3HKU',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    name: taskName,
                    // Você pode adicionar mais parâmetros conforme necessário
                })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao criar tarefa no ClickUp');
                }
                return response.json();
            })
            .then(data => {
                console.log('Tarefa criada:', data);
                alert('Tarefa criada com sucesso no ClickUp!');
                // Lógica adicional, se necessário
            })
            .catch(error => {
                console.error('Erro ao criar tarefa:', error);
                alert('Erro ao criar tarefa no ClickUp. Verifique o console para mais detalhes.');
            });
        });
    </script>
</body>

</html>
